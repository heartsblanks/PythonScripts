import jenkins.model.*
import hudson.model.*
import com.cloudbees.hudson.plugins.folder.*
import org.jenkinsci.plugins.workflow.multibranch.*
import org.jenkinsci.plugins.workflow.job.*

// Name of your folder
def folderName = "MyProjects"

// Get Jenkins instance
def jenkins = Jenkins.instance

// Get the folder by name
def folder = jenkins.getItem(folderName)

def html = new StringBuilder()
html << "<h2>Multibranch Pipeline Dashboard: " + folderName + "</h2>"
html << "<table border='1' cellpadding='5'><tr><th>Pipeline</th><th>Branch</th><th>Last Build</th><th>Status</th></tr>"

folder?.getItems().each { item ->
    if (item instanceof WorkflowMultiBranchProject) {
        def multibranchJobName = item.name
        item.getItems().each { branchJob ->  // each branch
            def lastBuild = branchJob.getLastBuild()
            def status = lastBuild?.result?.toString() ?: "N/A"
            def buildDisplay = lastBuild?.displayName ?: 'No builds'
            def buildUrl = lastBuild?.absoluteUrl ?: '#'

            html << "<tr>"
            html << "<td>${multibranchJobName}</td>"
            html << "<td>${branchJob.name}</td>"
            html << "<td><a href='" + buildUrl + "'>" + buildDisplay + "</a></td>"
            html << "<td>" + status + "</td>"
            html << "</tr>"
        }
    }
}

html << "</table>"

return html.toString()